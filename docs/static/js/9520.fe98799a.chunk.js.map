{"version":3,"file":"static/js/9520.fe98799a.chunk.js","mappings":"4MAcA,MAAMA,UAAuBC,EAAAA,kBAC3BC,WAAAA,CAAYC,GACV,MAMMC,EAAU,IANO,CACrBC,KAAM,eACNC,gBAAgB,EAChBC,4BAA4B,EAC5BC,YAAaC,EAAAA,MAIVN,EAAIC,SAETM,MAAM,CACJC,OAAQR,EAAIQ,OACZP,UACAQ,iBAAkBT,EAAIS,oBAExBC,EAAAA,EAAAA,GAAgBC,KAAM,KAAMC,EAAAA,EAAUC,MACxC,CAKA,aAAMC,GACJ,IAAIb,EAAUc,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,CAAC,EACnF,IAAI,IAAAG,EAAAC,EACF,MAAMC,QAAiBT,KAAKN,cAC5B,IAAKe,EACH,MAAM,IAAIC,EAAAA,EAEZV,KAAKW,iBAGLX,KAAKY,KAAK,UAAW,CACnBC,KAAM,eAKR,IAAIC,EAAU,KACd,GAAgB,QAAZP,EAAAP,KAAKV,eAAO,IAAAiB,GAAZA,EAAcf,iBAAmBuB,QAAQf,KAAKF,iBAAiBkB,QAAQhB,KAAKiB,oBAAqB,CACnGH,QAAgBd,KAAKkB,aAAaC,OAAM,IAAM,OAE9C,KADsBL,EAGpB,UACQL,EAASW,QAAQ,CACrBC,OAAQ,4BACRC,OAAQ,CAAC,CACPC,aAAc,CAAC,KAGrB,CAAE,MAAOC,GAGP,GAAIxB,KAAKyB,2BAA2BD,GAClC,MAAM,IAAIE,EAAAA,EAAyBF,EAEvC,CAEJ,CAGA,IAAKV,EAAS,CACZ,MAAMa,QAAiBlB,EAASW,QAAQ,CACtCC,OAAQ,wBAEVP,EAAUc,EAAAA,WAAiBD,EAAS,GACtC,CAGA,IAAIE,QAAyB7B,KAAK8B,aAE9BC,EAAgB/B,KAAKgC,mBAAmBH,GAG5C,GAAIvC,EAAQ2C,SAAWJ,IAAqBvC,EAAQ2C,QAClD,UACQjC,KAAKkC,YAAY5C,EAAQ2C,SAE/BJ,EAAmBvC,EAAQ2C,QAC3BF,EAAgB/B,KAAKgC,mBAAmB1C,EAAQ2C,QAClD,CAAE,MAAOE,GACPC,QAAQZ,MAAM,kCAADa,OAAmC/C,EAAQ2C,SAAWE,EACrE,CAIc,QAAhB3B,EAAIR,KAAKV,eAAO,IAAAkB,GAAZA,EAAchB,sBAEVQ,KAAKF,iBAAiBwC,QAAQtC,KAAKiB,kBAAmB,QAE9D,MAAMsB,EAAiB,CACrBC,MAAO,CACLC,GAAIZ,EACJa,YAAaX,GAEftB,SAAUA,EACVK,WAGF,OADAd,KAAKY,KAAK,UAAW2B,GACdA,CACT,CAAE,MAAOf,GACP,GAAIxB,KAAKyB,2BAA2BD,GAClC,MAAM,IAAIE,EAAAA,EAAyBF,GAErC,IAAoB,QAAhBA,EAAMmB,KACR,MAAM,IAAIC,EAAAA,EAAyBpB,GAErC,MAAMA,CACR,CACF,E","sources":["../node_modules/@thirdweb-dev/wallets/evm/connectors/rabby/dist/thirdweb-dev-wallets-evm-connectors-rabby.browser.esm.js"],"sourcesContent":["import { _ as _defineProperty } from '../../../../dist/defineProperty-d7c057bf.browser.esm.js';\nimport { a as ConnectorNotFoundError, U as UserRejectedRequestError, R as ResourceUnavailableError } from '../../../../dist/errors-9f6736cb.browser.esm.js';\nimport { w as walletIds } from '../../../../dist/walletIds-8e17ffe6.browser.esm.js';\nimport { InjectedConnector } from '../../injected/dist/thirdweb-dev-wallets-evm-connectors-injected.browser.esm.js';\nimport { utils } from 'ethers';\nimport { g as getInjectedRabbyProvider } from '../../../../dist/getInjectedRabbyProvider-db56bdef.browser.esm.js';\nimport '../../../../dist/classPrivateFieldSet-a5db7c83.browser.esm.js';\nimport '../../../../dist/WagmiConnector-2f14002d.browser.esm.js';\nimport '@thirdweb-dev/chains';\nimport 'eventemitter3';\nimport '../../../../dist/assertWindowEthereum-88295886.browser.esm.js';\nimport '../../../../dist/url-a45219bd.browser.esm.js';\nimport '../../../../dist/normalizeChainId-1fb9aedf.browser.esm.js';\n\nclass RabbyConnector extends InjectedConnector {\n  constructor(arg) {\n    const defaultOptions = {\n      name: \"Rabby Wallet\",\n      shimDisconnect: true,\n      shimChainChangedDisconnect: true,\n      getProvider: getInjectedRabbyProvider\n    };\n    const options = {\n      ...defaultOptions,\n      ...arg.options\n    };\n    super({\n      chains: arg.chains,\n      options,\n      connectorStorage: arg.connectorStorage\n    });\n    _defineProperty(this, \"id\", walletIds.rabby);\n  }\n\n  /**\n   * Connect to injected RabbyWallet provider\n   */\n  async connect() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    try {\n      const provider = await this.getProvider();\n      if (!provider) {\n        throw new ConnectorNotFoundError();\n      }\n      this.setupListeners();\n\n      // emit \"connecting\" event\n      this.emit(\"message\", {\n        type: \"connecting\"\n      });\n\n      // Attempt to show wallet select prompt with `wallet_requestPermissions` when\n      // `shimDisconnect` is active and account is in disconnected state (flag in storage)\n      let account = null;\n      if (this.options?.shimDisconnect && !Boolean(this.connectorStorage.getItem(this.shimDisconnectKey))) {\n        account = await this.getAccount().catch(() => null);\n        const isConnected = !!account;\n        if (isConnected) {\n          // Attempt to show another prompt for selecting wallet if already connected\n          try {\n            await provider.request({\n              method: \"wallet_requestPermissions\",\n              params: [{\n                eth_accounts: {}\n              }]\n            });\n          } catch (error) {\n            // Not all injected providers support `wallet_requestPermissions` (e.g. iOS).\n            // Only bubble up error if user rejects request\n            if (this.isUserRejectedRequestError(error)) {\n              throw new UserRejectedRequestError(error);\n            }\n          }\n        }\n      }\n\n      // if account is not already set, request accounts and use the first account\n      if (!account) {\n        const accounts = await provider.request({\n          method: \"eth_requestAccounts\"\n        });\n        account = utils.getAddress(accounts[0]);\n      }\n\n      // get currently connected chainId\n      let connectedChainId = await this.getChainId();\n      // check if connected chain is unsupported\n      let isUnsupported = this.isChainUnsupported(connectedChainId);\n\n      // if chainId is given, but does not match the currently connected chainId, switch to the given chainId\n      if (options.chainId && connectedChainId !== options.chainId) {\n        try {\n          await this.switchChain(options.chainId);\n          // recalculate the chainId and isUnsupported\n          connectedChainId = options.chainId;\n          isUnsupported = this.isChainUnsupported(options.chainId);\n        } catch (e) {\n          console.error(`Could not switch to chain id : ${options.chainId}`, e);\n        }\n      }\n\n      // if shimDisconnect is enabled\n      if (this.options?.shimDisconnect) {\n        // add shimDisconnectKey in storage - this signals that connector is \"connected\"\n        await this.connectorStorage.setItem(this.shimDisconnectKey, \"true\");\n      }\n      const connectionInfo = {\n        chain: {\n          id: connectedChainId,\n          unsupported: isUnsupported\n        },\n        provider: provider,\n        account\n      };\n      this.emit(\"connect\", connectionInfo);\n      return connectionInfo;\n    } catch (error) {\n      if (this.isUserRejectedRequestError(error)) {\n        throw new UserRejectedRequestError(error);\n      }\n      if (error.code === -32002) {\n        throw new ResourceUnavailableError(error);\n      }\n      throw error;\n    }\n  }\n}\n\nexport { RabbyConnector };\n"],"names":["RabbyConnector","InjectedConnector","constructor","arg","options","name","shimDisconnect","shimChainChangedDisconnect","getProvider","getInjectedRabbyProvider","super","chains","connectorStorage","_defineProperty","this","walletIds","rabby","connect","arguments","length","undefined","_this$options","_this$options2","provider","ConnectorNotFoundError","setupListeners","emit","type","account","Boolean","getItem","shimDisconnectKey","getAccount","catch","request","method","params","eth_accounts","error","isUserRejectedRequestError","UserRejectedRequestError","accounts","utils","connectedChainId","getChainId","isUnsupported","isChainUnsupported","chainId","switchChain","e","console","concat","setItem","connectionInfo","chain","id","unsupported","code","ResourceUnavailableError"],"sourceRoot":""}